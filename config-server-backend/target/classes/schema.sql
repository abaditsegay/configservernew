-- Schema for Spring Cloud Config Server JDBC backend
DROP TABLE IF EXISTS PROPERTIES;

CREATE TABLE PROPERTIES (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    APPLICATION VARCHAR(255) NOT NULL,
    PROFILE VARCHAR(255) NOT NULL,
    LABEL VARCHAR(255) NOT NULL,
    PROP_KEY VARCHAR(255) NOT NULL,
    PROP_VALUE TEXT,
    CREATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Create unique index to prevent duplicate configurations
CREATE UNIQUE INDEX idx_unique_config ON PROPERTIES (APPLICATION, PROFILE, LABEL, PROP_KEY);
